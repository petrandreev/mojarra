<?xml version="1.0" encoding="ISO-8859-1" ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:appez="http://java.sun.com/jsf/composite/components" >

    <ui:composition template="template.xhtml">
        <ui:define name="pageTitle">
            <h:outputText value="#{i18n['menuitem.label.tasks']}"></h:outputText>
        </ui:define>

        <ui:define name="content">

            <h:messages globalOnly="true" showDetail="true" tooltip="true" errorClass="errorMsgs" infoClass="infoMsgs" />
            
            
            <h:form id="frmTasks">
                <h:commandLink action="stories" value="#{'go back stories'}" immediate="true" />
                <h2>Tasks</h2>
                <h:dataTable value="#{tasksMB.dmTasks}" var="task"  rendered="#{tasksMB.dmTasks.rowCount > 0}">
                    <h:column headerClass="textColumn">
                        <f:facet name="header"><h:outputLabel value="#" /></f:facet>
                        <h:outputText value="#{tasksMB.dmTasks.rowIndex + 1}" />
                        <f:facet name="footer">#{""}</f:facet>
                    </h:column>
                    <h:column headerClass="textColumn">
                        <f:facet name="header"><h:outputLabel value="name" /></f:facet>
                        <h:outputText value="#{task.name}" />
                        <f:facet name="footer">#{tasksMB.dmTasks.rowCount}#{" tasks"}</f:facet>
                    </h:column>
                    <h:column>
                        <f:facet name="header"><h:outputLabel value="actions" /></f:facet>
                        <h:commandButton action="#{tasksMB.edit}" value="edit ..." immediate="true" />
                        <h:commandButton action="#{tasksMB.remove}" value="remove" immediate="true" />
                        <f:facet name="footer">#{" "}</f:facet>
                    </h:column>
                </h:dataTable>
                <h:form id="frmNewTask">
                
                <h2>New Task</h2>
                <h:panelGrid columns="3" >
                    <h:outputLabel value="#{i18n['tasks.label.story']}:" for="otStory" />
                    <h:outputText id="otStory" value="#{tasksMB.taskToSave.story.name}" />
                    <h:message for="otStory" />
                    <h:outputLabel value="#{i18n['tasks.label.name']}:" for="itName"  />
                    <h:inputText id="itName" value="#{tasksMB.taskToSave.name}" required="true" requiredMessage="Descreva a tarefa" />
                    <h:message for="itName" />
                    <f:verbatim></f:verbatim>
                    <h:commandButton action="#{tasksMB.save}" value="save" />
                </h:panelGrid>
            </h:form>
                <h:panelGrid columns="3" >
                    <h:outputLabel value="Nao ha tarefas para esta estoria"  rendered="#{tasksMB.dmTasks.rowCount eq 0}"/>
                </h:panelGrid>
                
            </h:form>
        </ui:define>
    </ui:composition>
</html>  
