<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta content="text/html; charset=iso-8859-1"
 http-equiv="Content-Type">
  <meta
 content="Mozilla/4.79C-CCK-MCD  [en] (X11; U; SunOS 5.8 sun4u) [Netscape]"
 name="GENERATOR">
  <title>JavaServer Faces 1.2 Release Notes</title>
  <link href="style/default.css" type="text/css" rel="stylesheet">
</head>
<body style="background-color: rgb(255, 255, 255);">
<center>
<h1>JavaServer<sup><font size="-1">TM</font></sup> Faces Technology,
version 1.2<br>
Release Notes</h1>
</center>
<hr>
<br>
<a name="14145"></a>For an updated, online version of these release
notes, see <a
 href="http://java.sun.com/j2ee/javaserverfaces/docs/ReleaseNotes.html">
Release Notes</a>
<p>Revised: 20050818
</p>
<p><a name="13552"></a>The purpose of this release is to provide a
reference implementation of the JavaServer Faces technology framework.
</p>
<p>This release of JavaServer Faces technology was developed under
the Java Community Process(SM) ("JCP(SM)") as <a
 href="http://jcp.org/jsr/detail/252.jsp">JSR252</a>. </p>
<h1>&nbsp;Contents</h1>
<ul>
  <li> <a href="#operating_systems">Supported Operating Systems</a></li>
  <li> <a href="#required_software">Required Software</a></li>
  <li> <a href="#release_includes">What This Release Includes</a></li>
  <li> <a href="#release_new">What's New in This Release</a></li>
  <li> <a href="#migrating">Migrating from 1.1_01 to 1.2</a></li>
  <li> <a href="#issues">Known Issues</a></li>
</ul>
<a name="operating_systems"></a>
<h1>Supported Operating Systems</h1>
<ul>
  <li>Solaris 8</li>
  <li>Solaris 9</li>
  <li>Windows 2000</li>
  <li>Windows XP</li>
  <li>GNU/Linux (Red Hat 7.2)</li>
</ul>
<a name="required_software"></a>
<h1>Required Software</h1>
This release requires that you install the software listed in the
following
table. Only those versions listed in the table have been tested and are
supported.
<br>
&nbsp;
<br>
&nbsp;
<table border="3">
  <caption>TABLE 1 Required Software</caption> <tbody>
    <tr>
      <th>Software</th>
      <th>Version
      <p>&nbsp;</p>
      </th>
    </tr>
    <tr>
      <td>Java Development Kit (JDK)<br>
      </td>
      <td>version 5.0 or later&nbsp;</td>
    </tr>
    <tr>
      <td>Sun Java System Application Server <br>
      </td>
      <td>version 9.0<br>
      </td>
    </tr>
    <tr>
      <td>Microsoft Internet Explorer or Netscape Navigator&nbsp;</td>
      <td>version 6 (IE) <br>
version 7 (Netscape)</td>
    </tr>
  </tbody>
</table>
<table>
  <tbody>
    <tr>
      <td><br>
      </td>
    </tr>
  </tbody>
</table>
<p><a name="release_includes"></a>
</p>
<h1>What This Release Includes</h1>
<ul>
&nbsp; <li>html_basic.tld: A JSP custom tag library for building
JavaServer
Faces applications
that render to an HTML client.</li>
  <li>jsf_core.tld: A JSP custom tag library for representing core
actions
independent
of a particular RenderKit.</li>
  <li>An API and reference implementation that provide user interface
components, model object management, pluggable rendering, server side
validation, data conversion, event processing, page flow management,
and
custom extensibility for all of these things.</li>
  <li>A set of demos in the samples directory. Please note that these
demos
are provided as a proof-of-concept rather than a best-practices guide
for writing JavaServer Faces applications. </li>
</ul>
<p><a name="release_new"></a>
</p>
<h1>What's New in This Release</h1>
This snapshot of JavaServer Faces Reference implementation includes the
bug fixes and implementation of issues listed under the General Changes
section of the JavaServer Faces technology 1.2 PFD access draft plus
the bug fixes listed in the following table.<br>
<br>
<table border="1" style="width: 100%;" cellpadding="2" cellspacing="2">
  <caption>Table 2: List of Bugs Fixed in this Release<br>
  </caption><tbody>
    <tr>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Issue/Bug
Number</span><br>
      </td>
      <td style="vertical-align: top;"><span style="font-weight: bold;">Summary</span><br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=10">Issue
10</a><br>
      </td>
      <td>target property on commandLink does not work<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=26">Issue
26</a><br>
      </td>
      <td style="vertical-align: top;">Hidden Field - FormRenderer -
Renderer Dependencies<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=42">Issue
42</a><br>
      </td>
      <td style="vertical-align: top;">Message list (HtmlMessages) does
not correctly handle style attribute<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=43">Issue
43</a><br>
      </td>
      <td>MessagesRenderer Bug Fixes<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=49">Issue
49</a><br>
      </td>
      <td>attribute/property transparency: really slow<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=53">Issue
53</a><br>
      </td>
      <td>verbatim tag trims whitespace<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=55">Issue
55</a><br>
      </td>
      <td>commandButton image attr don't add context path<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=56">Issue
56</a><br>
      </td>
      <td style="vertical-align: top;">Fail to validate select one menu
in a table, if its rendered is false<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=63">Issue
63</a><br>
      </td>
      <td>Use of Browser's back-button causes multiple ActionEvents to
pile up<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=64">Issue
64</a><br>
      </td>
      <td style="vertical-align: top;">column component metadata
missing facets<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=66">Issue
66</a><br>
      </td>
      <td>Possible optimization regarding execution of PhaseListeners<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=67">Issue
67</a><br>
      </td>
      <td>Usability of JSF RI Exceptions and Stack Traces<br>
      </td>
    </tr>
    <tr>
      <td><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=68">Issue
68</a><br>
      </td>
      <td>Concurrency issue with CommandLinkRenderer<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=70">Issue
70</a><br>
      </td>
      <td>HtmlTaglib Generates Release Methods<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=71">Issue
71</a><br>
      </td>
      <td><span class="moz-txt-link-freetext">Allow JavaScirpt User
Event Support<br>
      </span></td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=80">Issue
80</a><br>
      </td>
      <td style="vertical-align: top;">LifecycleImple.reload() not
sufficient for all cases<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=85">Issue
85</a><br>
      </td>
      <td style="vertical-align: top;">ApplicationImpl.createConverter()
does not throw FacesException<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=87">Issue
87</a><br>
      </td>
      <td style="vertical-align: top;">Unexpected behaviour with
disabled selectOneMenu<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=89">Issue
89</a><br>
      </td>
      <td style="vertical-align: top;">HtmlResponseWriter.writeAttribute()
throws NPE for null values<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=91">Issue
91</a><br>
      </td>
      <td style="vertical-align: top;">Don't swallow exceptions inside
JspExceptions or FacesExceptions<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=92">Issue
92</a><br>
      </td>
      <td style="vertical-align: top;">MessagesRenderer Does Not Handle
layout="list"<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=95">Issue
95</a><br>
      </td>
      <td><span class="moz-txt-link-freetext">RestoreViewPhase.isPostback()
not good to determine restore view<br>
      </span></td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=116">Issue
116</a><br>
      </td>
      <td>Colon's not allowed in javascript function name<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=125">Issue
125</a><br>
      </td>
      <td style="vertical-align: top;">Memory issues<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=128">Issue
128</a><br>
      </td>
      <td style="vertical-align: top;">UIData does not
restoreDescendantState for descendant facets<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=134">Issue
134</a><br>
      </td>
      <td>Optimisations to managed bean creation facility<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=135">Issue
135</a> <br>
      </td>
      <td>RuntimeException thrown in decode() swallowed<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=146">Issue
146</a><br>
      </td>
      <td style="vertical-align: top;">NPE in
ExternalContextImpl.dispatch() when file not present<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=152">Issue
152</a><br>
      </td>
      <td style="vertical-align: top;">UIData preserving request
attributes<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="https://javaserverfaces.dev.java.net/issues/show_bug.cgi?id=159">Issue
159</a><br>
      </td>
      <td>Nested DataTable expressions resolve wrong<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;">Fix for ClassCastException that
happens when two portlets are deployed<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
<h1><a name="migrating"></a>Migrating From 1.1_01 to 1.2</h1>
<p>This implementation is 100% compatible with the 1.1_01
implementation,
but many bugs have been fixed. If your application dependend on one of
these bugs, it will need to be changed. Please see the <a
 href="#release_new">What's New In this Release</a> section.<br>
</p>
<p>One of the primary changes in this release is that JavaServer Faces
technology utilizes the new unified expression language (unified EL) ,
which is essentially an amalgamation of the JSP EL and the JavaServer
Faces 1.1_01 EL.&nbsp; The rest of this section describes how to
migrate
your JavaServer Faces 1.1_01 applications to use the unified EL.<br>
</p>
<p><br>
</p>
<h2>Migrating to the Unified EL</h2>
For those of you who already have applications that use the JavaServer
Faces EL, you can be assured that your applications
are completely backward compatible.&nbsp; You don't need to make any
changes to run your applications with the latest version of JavaServer
Faces technology.<br>
<br>
If you plan to modify your current applications to use the unified EL,
however, there are some things you need to do, which this section
explains.<br>
<br>
<h3>Using the Unified EL in Existing Applications</h3>
For the page author and application developer, there is nothing that
you need to do differently in JavaServer Faces technology 1.2
applications vs.
JavaServer Faces technology 1.1_01 or
earlier applications.&nbsp; The component writer and the application
architect do have some changes to make, which include:<br>
<br>
<ul>
  <li>Editing custom component classes to use the new APIs<br>
  </li>
  <li>Editing custom component tag handlers to use the new APIs</li>
  <li>Updating the TLD defining the custom component tags with the new
version number and the new <span style="font-family: monospace;">deferred-value</span>
or <span style="font-family: monospace;">deferred-method</span>
elements<br>
  </li>
</ul>
<h4>Making Changes to the Custom Component Classes</h4>
JavaServer Faces technology 1.1_01 and earlier versions used the <span
 style="font-family: monospace;">ValueBinding</span>
and
<span style="font-family: monospace;">MethodBinding</span> classes to
represent value expressions and
method
expressions, respectively.&nbsp; These classes are still available in
JavaServer Faces technology 1.2 for those who want to continue using
them.&nbsp; If you want
your components to use the unified EL, however, you need to change all
instances of <code><span style="font-family: monospace;">ValueBinding</span>
</code>to <span style="font-family: monospace;">ValueExpression </span>and
all instances of
<span style="font-family: monospace;">MethodBinding</span> to <span
 style="font-family: monospace;">MethodExpression</span>.&nbsp; The <span
 style="font-family: monospace;">ValueExpression</span> and
<span style="font-family: monospace;">MethodExpression</span> APIs are
part of the unified EL
specification.&nbsp; The following component method shows the
JavaServer Faces technology 1.1_01
version of a value-binding enabled component property.<br>
<br>
<pre class="pPreformattedRelative">public boolean someProperty() {<br>&nbsp;&nbsp;if (this.someProperty) {<br>&nbsp;&nbsp;    return (this.someProperty);<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;ValueBinding vb = getValueBinding("someProperty");<br>&nbsp;&nbsp;if (vb != null) {<br>&nbsp;&nbsp;&nbsp;&nbsp;Boolean value = (Boolean) vb.getValue(getFacesContext());<br>&nbsp;&nbsp;&nbsp;&nbsp;return (value.booleanValue());<br>&nbsp;&nbsp;} else {<br>&nbsp;&nbsp;    return (this.someProperty);<br>&nbsp;&nbsp;}<br>}<br><br></pre>
The following code shows this method converted to use the new APIs.<br>
<br>
<pre>public boolean someProperty() {&nbsp;<br>	if (this.someProperty) {<br>		return (this.someProperty);<br>	}<br>	ValueExpression ve = getValueExpression("someProperty");<br>	if (ve != null) {<br>		Boolean value = (Boolean)<br>		ve.getValue(getFacesContext().getELContext());<br>		return (value.booleanValue());<br>	} else {<br>		return (this.someProperty);<br>	}<br>}&nbsp; </pre>
<br>
<h4>Making Changes to the Custom Component Tag Handlers</h4>
To migrate your tag handler class, you need to do the following:<br>
<ul>
  <li>Make the class extend <span style="font-family: monospace;">UIComponentELTag</span>
instead of <span style="font-family: monospace;">UIComponentTag</span></li>
  <li>Change <span style="font-family: monospace;">ValueBinding</span>
to <span style="font-family: monospace;">ValueExpression</span> and <span
 style="font-family: monospace;">MethodBinding</span> to <span
 style="font-family: monospace;">MethodExpression</span></li>
  <li>Simplify the <span style="font-family: monospace;">setProperties</span>
method by removing the check for if the property is value-expression
enabled<br>
  </li>
</ul>
Here are the relevant pieces of a tag handler class using the version
1.1_01 APIs:<br>
<br>
<p class="MsoNormal">
</p>
<pre>public class SimpleComponentTag extends UIComponentTag {<span
 style="">&nbsp;&nbsp;&nbsp;  <br></span><br>	String someProperty;<span
 style="">  <br></span>	String validator;<br><span
 style="font-family: Lucidasans;"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br></span></span>	public void setSomeProperty(String someProperty) {<span
 style="font-family: Lucidasans;"><o:p></o:p></span><br><span style="">	   </span>this.someProperty = someProperty;<span
 style=""><br></span>	}<span style="font-family: Lucidasans;"><span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br></span></span>	public void setValidator(String validator) {<span
 style="font-family: Lucidasans;"></span><span style=""><br></span>	   this.validator = validator;<span
 style=""><br></span>	}<span style="font-family: Lucidasans;"><span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br>	...</span></span><span
 style="font-family: Lucidasans;"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br></span></span>	protected void setProperties(UIComponent component) {<span
 style="font-family: Lucidasans;"></span><span style=""><br></span>	   super.setProperties(component);<span
 style=""><span style=""><br></span>		if (someProperty != null) {<br>		</span>   if (isValueReference(someProperty)) {<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br></span>		   	ValueBinding vb = FacesContext.getCurrentInstance().<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br></span>					getApplication().createValueBinding(someProperty);<br><span
 style="">			</span>component.setValueBinding(&#8220;someProperty&#8221;, vb);<span
 style=""><br></span>		   } else {<span style=""><br>		   </span>	component.getAttributes().put(&#8220;someProperty&#8221;, someProperty);<br><span
 style="">		</span>   }<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br></span>		}<br><span
 style="">	   </span>	if(validator != null) {<br><span style="">		</span>   if (isValueReference(validator)) {<br><span
 style="">			</span>Class args[] = { FacesContext.class, UIComponent.class,<br>				Object.class };<br><span
 style="">			</span>MethodBinding vb = FacesContext.getCurrentInstance().<br><span
 style="">			   </span>getApplication().createMethodBinding(validator, args);<br>			<span
 style=""></span>input.setValidator(vb);<br><span style="">		</span>   } else {<br>			<span
 style=""></span>throw new<span style="">&nbsp; </span>FacesException(&#8220;Invalid Expression&#8221;);<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span>		   }<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br></span>		}<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span>	}<br><br>}</pre>
<br>
And here is the same tag handler class converted to use the 1.2 APIs:<br>
<br>
<pre>public class SimpleComponentTag extends UIComponentELTag {<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span><br>	ValueExpression someProperty;<br>	MethodExpression validator;<span
 style="font-family: Lucidasans;"><span style=""><br><br></span></span>	public void setSomeProperty(ValueExpression someProperty)<span
 style="font-family: lucidasans,mon,mon;"> {</span><span
 style="font-family: lucidasans,mon;"></span><br>	   this.someProperty = someProperty;<span
 style=""><br>	</span>}<span style="font-family: Lucidasans;"><span
 style=""><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span></span>	public void setValidator(MethodExpression validator) {<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span>	   this.validator = validator;<br>	}<span
 style="font-family: Lucidasans;"><span style=""><br>	...</span></span><span
 style="font-family: Lucidasans;"><span style=""></span></span><br><br>	protected void setProperties(UIComponent component) {<br>	   super.setProperties(component);<span
 style=""></span><br>	   if (someProperty != null) {<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span>		if (!someProperty.isLiteralText()) {<span
 style=""></span><br>		   component.setValueExpression(&#8220;someProperty&#8221;, someProperty);<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span>		} else {<span
 style=""></span><br>		   component.getAttributes().put(&#8220;someProperty&#8221;,<br>			someProperty.getExpressionString());<br>		}<span
 style=""></span><br>	   }<span style=""></span><br>	   if(validator != null) {<br>		component.addValidator(new MethodExpressionValidator(validator));<span
 style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span>	   }<br>	}<br>}<span
 style="font-family: Lucidasans;"><br><br></span></pre>
Notice that the new
<span style="font-family: monospace;">setProperties</span> method does
not have to do the work
of getting the expression from the <span
 style="font-family: monospace;">Application</span> instance and
converting
a <span style="font-family: monospace;">String</span> to a value
binding or method binding.&nbsp; Instead, the JSP
container manages
the <span style="font-family: monospace;">ValueExpression</span> and <span
 style="font-family: monospace;">MethodExpression</span> objects and
passes them to the
tag handler.&nbsp;
Also, <span style="font-family: monospace;">setProperties</span> does
not have to check if the property is
value-expression or method-expression enabled because this information
is already in the TLD,
which we show in the next section.<br>
<h4>Making Changes to the Custom Tag TLD</h4>
<p class="MsoNormal">To migrate your TLD files to use the new
expression language, you need to do the following:<br>
</p>
<ul>
  <li>Change the JSP version number to 2.1.<br>
  </li>
  <li>Remove the <span style="font-family: monospace;">rtexprvalue</span>
element and replace it with either
    <span style="font-family: monospace;">deferred-value</span> or <span
 style="font-family: monospace;">deferred-method</span>, depending on
whether the
corresponding property accepts value expressions or method expressions.<br>
  </li>
</ul>
<p class="MsoNormal">The following TLD defines a custom component tag
based on version 1.1_01:<br>
<br>
</p>
<p class="MsoNormal"><br>
</p>
<pre>&lt;taglib&gt;<br>   &lt;!-- ============== Tag Library Description Elements ============= --&gt;<br>   &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;<br>   &lt;jsp-version&gt;1.2&lt;/jsp-version&gt;<span
 style=""></span><br>   &lt;short-name&gt;Demo Taglib&lt;/short-name&gt;<br>   &lt;tag&gt;<span
 style=""></span><br>	&lt;name&gt;simple&lt;/name&gt;<span style=""></span><br>	&lt;tag-class&gt;example.SimpleComponentTag&lt;/tag-class&gt;<span
 style=""></span><br>	&lt;body-content&gt;JSP&lt;/body-content&gt;<span
 style=""></span><br>	&lt;attribute&gt;<span style=""></span><br>		&lt;name&gt;someProperty&lt;/name&gt;<span
 style=""></span><br>		&lt;required&gt;true&lt;/required&gt;<span
 style=""></span><br>		&lt;rtexprvalue&gt;false&lt;/rtexprvalue&gt;<span
 style=""></span><br>	&lt;/attribute&gt;<br>	&lt;attribute&gt;<br>		&lt;name&gt;validator&lt;/name&gt;<br>		&lt;required&gt;false&lt;/required&gt;<br>		&lt;rtexprvalue&gt;false&lt;/rtexprvalue&gt;<br>	&lt;/attribute&gt;<span
 style=""></span><br>   &lt;/tag&gt;<br>&lt;/taglib&gt;<br><br></pre>
<p class="MsoNormal"><o:p>The following TLD defines the same custom
component tag for JavaServer Faces technology 1.2:<br>
<br>
</o:p></p>
<p class="MsoNormal"><span style=""><br>
&nbsp;
<br>
</span></p>
<pre>&lt;taglib&gt;<span style=""></span><br>   &lt;!-- ============== Tag Library Description Elements ============= --&gt;<span
 style=""></span><br>   &lt;tlib-version&gt;1.1&lt;/tlib-version&gt;<span
 style=""></span><br>   &lt;jsp-version&gt;2.1&lt;/jsp-version&gt;<span
 style=""></span><br>   &lt;short-name&gt;Demo Taglib&lt;/short-name&gt;<br>   &lt;tag&gt;<br>	&lt;name&gt;simple&lt;/name&gt;<br>	&lt;tag-class&gt;example.SimpleComponentTag&lt;/tag-class&gt;<span
 style=""></span><br>	&lt;body-content&gt;JSP&lt;/body-content&gt;<span
 style=""></span><br>	&lt;attribute&gt;<br>	   &lt;name&gt;someProperty&lt;/name&gt;<span
 style=""></span><br>	   &lt;required&gt;true&lt;/required&gt;<br>	   &lt;deferred-value&gt;<span
 style=""></span><br>	   	&lt;type&gt;java.lang.String&lt;/type&gt;<br>	   &lt;/deferred-value&gt;<span
 style=""></span><br>	&lt;/attribute&gt;<br>	&lt;attribute&gt;<br>	   &lt;name&gt;validator&lt;/name&gt;<br>	   &lt;required&gt;false&lt;/required&gt;<br>	   &lt;deferred-method&gt;<span
 style=""></span><br>		&lt;method-signature&gt;<br>		   void validate(javax.faces.context.FacesContext,<br>			javax.faces.component.UIComponent, java.lang.Object)<br>		&lt;/method-signature&gt;<br>	   &lt;/deferred-method&gt;<br>	&lt;/attribute&gt;<span
 style=""></span><br>   &lt;/tag&gt;<br>&lt;/taglib&gt;</pre>
&nbsp;Note that the <span style="font-family: monospace;">jsp-version</span>
element is now 2.1.&nbsp; This
indicates to the JSP 2.1 container whether or it should try to create a
<span style="font-family: monospace;">ValueExpression</span> or <span
 style="font-family: monospace;">MethodExpression</span> instance and
pass it to the tag
handler or pass an
expression string as a literal value to the tag handler.&nbsp; If the
version number is 2.1, it does the former.<br>
<br>
The other change is that <span style="font-family: monospace;">rtexprvalue</span>
has been replaced with the
<span style="font-family: monospace;">deferred-value</span> element for
the <span style="font-family: monospace;">someProperty</span> property
and with
<span style="font-family: monospace;">deferred-method</span> for the <span
 style="font-family: monospace;">validator</span> property.&nbsp; The <span
 style="font-family: monospace;">deferred-value</span>
element tells the JSP container that the property accepts deferred
value expressions.&nbsp; The <span style="font-family: monospace;">deferred-method</span>
element tells the JSP
container that the <span style="font-family: monospace;">validator</span>
property accepts method expressions.&nbsp;
Therefore, the
container creates a <span style="font-family: monospace;">ValueExpression</span>
object for <span style="font-family: monospace;">someProperty</span>
and a
<span style="font-family: monospace;">MethodExpression</span> object
for the <span style="font-family: monospace;">validator</span>
property and
passes these objects to the tag handler.&nbsp; The <span
 style="font-family: monospace;">type</span> subelement
of <span style="font-family: monospace;">deferred-value</span>
indicates the type to which the expression must
evaluate.&nbsp; The <span style="font-family: monospace;">method-signature</span>
subelement of <span style="font-family: monospace;">deferred-method</span>
specifies the signature required for the corresponding method.
<p> </p>
<br>
<h1><a name="issues">Known</a> Issues With This Release</h1>
As stated in section <a href="#migrating">Migrating from 1.1_01 to 1.2</a>,
your JavaServer Faces technology, version 1.1_01 applications can run
on JavaServer Faces technology 1.2.&nbsp; However, there are a few
corner cases in which backwards-compatibility breaks.&nbsp; Please see
the section Breakages in Backwards Compatibility in the JavaServer
Faces technology 1.2 PFD specification.<br>
<br>
<hr>
<p>Copyright &copy; 2005 Sun Microsystems, Inc., 4150 Network Circle,
Santa
<br>
Clara, California 95054, U.S.A. All rights reserved.
</p>
<p>Sun Microsystems, Inc. has intellectual property rights relating to
<br>
technology embodied in this product. In particular, and without
<br>
limitation, these intellectual property rights may include one or more
<br>
of the U.S. patents listed at http://www.sun.com/patents and one or
more
<br>
additional patents or pending patent applications in the U.S. and other
<br>
countries.
</p>
<p>This product is distributed under licenses restricting its use,
copying
<br>
distribution, and decompilation. No part of this product may be
<br>
reproduced in any form by any means without prior written authorization
<br>
of Sun and its licensors, if any.
</p>
<p>Third-party software, including font technology, is copyrighted and
<br>
licensed from Sun suppliers.
</p>
<p>Sun, Sun Microsystems, the Sun logo, the Java Coffee Cup logo,
<br>
JavaServer, and Java are trademarks or registered trademarks of Sun
<br>
Microsystems, Inc. in the U.S. and other countries.
</p>
<p>Federal Acquisitions: Commercial Software - Government Users Subject
to
<br>
Standard License Terms and Conditions.
</p>
<hr width="100%">
<p>Copyright &copy; 2005 Sun Microsystems, Inc., 4150 Network Circle,
<br>
Santa Clara, California 95054, Etats-Unis. Tous droits
r&eacute;serv&eacute;s.
</p>
<p>Sun Microsystems, Inc. a les droits de propri&eacute;t&eacute;
intellectuels
relatants
<br>
&agrave; la technologie incorpor&eacute;e dans ce produit. En
particulier,
et sans la
<br>
limitation, ces droits de propri&eacute;t&eacute; intellectuels peuvent
inclure un ou
<br>
plus des brevets am&eacute;ricains &eacute;num&eacute;r&eacute;s
&agrave;
http://www.sun.com/patents et un
<br>
ou les brevets plus suppl&eacute;mentaires ou les applications de
brevet
en
<br>
attente dans les Etats - Unis et les autres pays.
</p>
<p>Ce produit ou document est prot&eacute;g&eacute; par un copyright et
distribu&eacute; avec
<br>
des licences qui en restreignent l'utilisation, la copie, la
<br>
distribution, et la d&eacute;compilation. Aucune partie de ce produit
ou
<br>
document ne peut &ecirc;tre reproduite sous aucune forme, par quelque
moyen
<br>
que ce soit, sans l'autorisation pr&eacute;alable et &eacute;crite
de Sun et de ses
<br>
bailleurs de licence, s'il y ena.
</p>
<p>Le logiciel d&eacute;tenu par des tiers, et qui comprend la
technologie
<br>
relative aux polices de caract&egrave;res, est prot&eacute;g&eacute;
par un copyright et
<br>
licenci&eacute; par des fournisseurs de Sun.
</p>
<p>Sun, Sun Microsystems, le logo Sun, le logo Java Coffee Cup,
JavaServer,
<br>
et Java sont des marques de fabrique ou des marques
d&eacute;pos&eacute;es
de Sun
<br>
Microsystems, Inc. aux Etats-Unis et dans d'autres pays.
<br>
&nbsp;
<br>
&nbsp;
</p>
</body>
</html>
