<?xml version="1.0"?>

<!--
     This document contains test scenarios for the implementation
     of the default NavigationHandler implementation, as described
     in Section 7.4.2 of the spec.  These rules assume that an
     application configuration file including all of the example
     navigation rules in Section 7.4.3 has been processed.

     Each test scenario is represented by a "test" element with the
     following attributes:

     fromViewId                view id from the view currently
                               being processed (required)

     fromActionRef             Action reference of the action that
                               was invoked (optional)

     fromOutcome               Logical outcome from the
                               action that was called (optional)

     toViewId                  view id of the view that should be
                               selected next, which may be the same
                               as the from view (required)

-->

<tests>

  <!-- ============ Tests From /login.jsp view Identifier ================= -->


  <!-- Positive tests that should match specific rules -->

  <test fromViewId="/login.jsp"
     fromActionRef="userBean.login"
       fromOutcome="success"
          toViewId="/home.jsp"/>

  <test fromViewId="/login.jsp"
     fromActionRef="userBean.register"
       fromOutcome="success"
          toViewId="/welcome.jsp"/>

  <test fromViewId="/login.jsp"
     fromActionRef="userBean.register"
       fromOutcome="duplicateUserName"
          toViewId="/try-another-name.jsp"/>


  <!-- Positive tests that should match application wide rules -->

  <!-- Matches the generic logout rule #1 -->
  <test fromViewId="/login.jsp"
     fromActionRef="userBean.logout"
          toViewId="/logout.jsp"/>

  <!-- Matches the generic logout rule #2 -->
  <test fromViewId="/login.jsp"
     fromActionRef="userBean.logout"
       fromOutcome="whatever"
          toViewId="/logout.jsp"/>

  <!-- Matches generic error outcome rule #1 -->
  <test fromViewId="/login.jsp"
       fromOutcome="loginRequired"
          toViewId="/must-login-first.jsp"/>

  <!-- Matches generic error outcome rule #2 -->
  <test fromViewId="/login.jsp"
     fromActionRef="foo.bar"
       fromOutcome="loginRequired"
          toViewId="/must-login-first.jsp"/>

  <!-- Matches generic search results #1 -->
  <test fromViewId="/login.jsp"
     fromActionRef="searchForm.go"
          toViewId="/search-problem.jsp"/>

  <!-- Matches generic search results #2 -->
  <test fromViewId="/login.jsp"
     fromActionRef="searchForm.go"
       fromOutcome="success"
          toViewId="/search-results.jsp"/>


  <!-- Negative tests that should not match any rules -->


  <!-- Mismatched fromActionRef -->
  <test fromViewId="/login.jsp"
     fromActionRef="foo.bar"
       fromOutcome="success"
          toViewId="/login.jsp"/>

  <!-- Mismatched fromOutcome -->
  <test fromViewId="/login.jsp"
     fromActionRef="userBean.login"
       fromOutcome="foobar"
          toViewId="/login.jsp"/>

  <!-- Missing fromActionRef -->
  <test fromViewId="/login.jsp"
       fromOutcome="success"
          toViewId="/login.jsp"/>

  <!-- Missing fromOutcome -->
  <test fromViewId="/login.jsp"
     fromActionRef="userBean.login"
          toViewId="/login.jsp"/>


  <!-- ============ Tests From /other.jsp view Identifier ================= -->


  <!-- Positive tests that should match application wide rules -->


  <!-- Matches the generic logout rule #1 -->
  <test fromViewId="/other.jsp"
     fromActionRef="userBean.logout"
          toViewId="/logout.jsp"/>

  <!-- Matches the generic logout rule #2 -->
  <test fromViewId="/other.jsp"
     fromActionRef="userBean.logout"
       fromOutcome="whatever"
          toViewId="/logout.jsp"/>

  <!-- Matches generic error outcome rule #1 -->
  <test fromViewId="/other.jsp"
       fromOutcome="loginRequired"
          toViewId="/must-login-first.jsp"/>

  <!-- Matches generic error outcome rule #2 -->
  <test fromViewId="/other.jsp"
     fromActionRef="foo.bar"
       fromOutcome="loginRequired"
          toViewId="/must-login-first.jsp"/>

  <!-- Matches generic search results #1 -->
  <test fromViewId="/other.jsp"
     fromActionRef="searchForm.go"
          toViewId="/search-problem.jsp"/>

  <!-- Matches generic search results #2 -->
  <test fromViewId="/other.jsp"
     fromActionRef="searchForm.go"
       fromOutcome="success"
          toViewId="/search-results.jsp"/>


  <!-- Negative tests that should not match any rules -->


  <!-- Mismatched fromActionRef -->
  <test fromViewId="/other.jsp"
     fromActionRef="foo.bar"
       fromOutcome="success"
          toViewId="/other.jsp"/>

  <!-- Mismatched fromOutcome -->
  <test fromViewId="/other.jsp"
     fromActionRef="userBean.login"
       fromOutcome="foobar"
          toViewId="/other.jsp"/>

  <!-- Missing fromActionRef -->
  <test fromViewId="/other.jsp"
       fromOutcome="success"
          toViewId="/other.jsp"/>

  <!-- Missing fromOutcome -->
  <test fromViewId="/other.jsp"
     fromActionRef="userBean.login"
          toViewId="/other.jsp"/>


  <!-- ========= Tests From /movies/index.jsp View Identifier ============= -->


  <!-- Positive tests that should match application wide rules -->


  <!-- Matches the generic logout rule #1 -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="userBean.logout"
          toViewId="/logout.jsp"/>

  <!-- Matches the generic logout rule #2 -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="userBean.logout"
       fromOutcome="whatever"
          toViewId="/logout.jsp"/>

  <!-- Matches generic error outcome rule #1 -->
  <test fromViewId="/movies/index.jsp"
       fromOutcome="loginRequired"
          toViewId="/must-login-first.jsp"/>

  <!-- Matches generic error outcome rule #2 -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="foo.bar"
       fromOutcome="loginRequired"
          toViewId="/must-login-first.jsp"/>

  <!-- Matches special search results #1 -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="searchForm.go"
          toViewId="/search-problem.jsp"/>

  <!-- Matches special search results #2 -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="searchForm.go"
       fromOutcome="success"
          toViewId="/movie-search-results.jsp"/>


  <!-- Negative tests that should not match any rules -->


  <!-- Mismatched fromActionRef -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="foo.bar"
       fromOutcome="success"
          toViewId="/movies/index.jsp"/>

  <!-- Mismatched fromOutcome -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="userBean.login"
       fromOutcome="foobar"
          toViewId="/movies/index.jsp"/>

  <!-- Missing fromActionRef -->
  <test fromViewId="/movies/index.jsp"
       fromOutcome="success"
          toViewId="/movies/index.jsp"/>

  <!-- Missing fromOutcome -->
  <test fromViewId="/movies/index.jsp"
     fromActionRef="userBean.login"
          toViewId="/movies/index.jsp"/>


</tests>
