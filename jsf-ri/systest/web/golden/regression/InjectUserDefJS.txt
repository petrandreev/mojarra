<html>
    <head>
        <title>User Defined JS Injection Test</title>        
    </head>
    <body>
        
<form id="j_id_id16" name="j_id_id16" method="post" action="/jsf-systest/faces/regression/InjectUserDefJS.jsp;jsessionid=adaf84a2c59550d49a9a1b7e722b" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="j_id_id16" value="j_id_id16" />
<input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="j_id327:j_id328" />

<script type="text/javascript" language="Javascript">
<!--
for (var f = 0; f < document.forms.length; f++) {
    var fm = document.forms[f];
    fm.dpf = function() {
        var adp = this.adp;
        if (adp != null) {
            for (var i = 0; i < adp.length; i++) {
                this.removeChild(adp[i]);
            }
        }
        this.adp = null;
    };
    var mos = fm.onsubmit;
    if (mos == null) {
        fm.onsubmit = fm.dpf;
    } else {
        fm.onsubmit = function() {
            fm.dpf();
            mos();
        }
    }
    fm.apf = function(pvp) {
        this.dpf();
        var adp = new Array();
        this.adp = adp;
        var ps = pvp.split(',');
        for (var i = 0, ii = 0; i < ps.length; i++, ii++) {
            var p = document.createElement("input");
            p.type = "hidden";
            p.name = ps[i];
            p.value = ps[i + 1];
            this.appendChild(p);
            adp[ii] = p;
            i += 1;
        }
    };
}
function jsfcljs(f, pvp, t) {
    if (f.apf) {
        f.apf(pvp);
    }
    if (t) {
       f.target = t;
    }
    f.submit();
    return false;
};
//-->
</script>
<a href="#" onclick="var a=function(){alert('Are you sure?');};var b=function(){return jsfcljs(document.forms['j_id_id16'],'j_id_id16:j_id_id18,j_id_id16:j_id_id18','');};return (a()==false) ? false : b();">Link</a><input type="submit" name="j_id_id16:j_id_id20" value="Button" onclick="alert('Are you sure?')" />
</form>
    </body>
</html>